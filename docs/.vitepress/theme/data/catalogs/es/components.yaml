# yaml-language-server: $schema=../schemas/components.schema.json
# Metadata about the catalog

metadata:
  title: "Catálogo de Componentes de Datos"
  version: "1.0.0"
  date: "2025-09-18"
  description: "Componentes lógicos/físicos que realizan/gestionan entidades de datos en el Sistema de Información de Transporte Público."
  author:
    - "Jostin Cubero Torres"
    - "Fabián Abarca Calderón"
  organization: "Laboratorio de Sistemas Inteligentes de Movilidad (SIMOVI)"
  contact: "simovi@ucr.ac.cr"
  license: "CC BY-NC 4.0"

data_components:
  - id: "component:001"
    name: "Relational Database Manager"
    description: "Transactional relational database (e.g., PostgreSQL) that materializes canonical GTFS entities."
    data_entities:
      - "data-entity:001"  # Agency
      - "data-entity:002"  # Stop
      - "data-entity:003"  # Route
      - "data-entity:004"  # Trip
      - "data-entity:005"  # Stop Time
      - "data-entity:006"  # Calendar
      - "data-entity:007"  # Calendar Date
      - "data-entity:008"  # Fare Attribute
      - "data-entity:009"  # Fare Rule
      - "data-entity:010"  # Timeframe
      - "data-entity:011"  # Rider Category
      - "data-entity:012"  # Fare Medium
      - "data-entity:013"  # Fare Product
      - "data-entity:014"  # Fare Leg Rule
      - "data-entity:015"  # Fare Leg Join Rule
      - "data-entity:016"  # Fare Transfer Rule
      - "data-entity:017"  # Area
      - "data-entity:018"  # Stop Area
      - "data-entity:019"  # Network
      - "data-entity:020"  # Route Network
      - "data-entity:021"  # Shape
      - "data-entity:022"  # Frequency
      - "data-entity:023"  # Transfer
      - "data-entity:024"  # Pathway
      - "data-entity:025"  # Level
      - "data-entity:026"  # Location Group
      - "data-entity:027"  # Location Group Stop
      - "data-entity:028"  # Location
      - "data-entity:029"  # Booking Rule
      - "data-entity:030"  # Translation
      - "data-entity:031"  # Feed Info
      - "data-entity:032"  # Attribution

  - id: "component:002"
    name: "Databus API (GTFS Ingestion)"
    description: "Ingestion service that imports and validates GTFS files and writes them into the relational database."
    data_entities:
      - "data-entity:001"  # Agency
      - "data-entity:002"  # Stop
      - "data-entity:003"  # Route
      - "data-entity:004"  # Trip
      - "data-entity:005"  # Stop Time
      - "data-entity:006"  # Calendar
      - "data-entity:007"  # Calendar Date
      - "data-entity:008"  # Fare Attribute
      - "data-entity:009"  # Fare Rule
      - "data-entity:010"  # Timeframe
      - "data-entity:011"  # Rider Category
      - "data-entity:012"  # Fare Medium
      - "data-entity:013"  # Fare Product
      - "data-entity:014"  # Fare Leg Rule
      - "data-entity:015"  # Fare Leg Join Rule
      - "data-entity:016"  # Fare Transfer Rule
      - "data-entity:017"  # Area
      - "data-entity:018"  # Stop Area
      - "data-entity:019"  # Network
      - "data-entity:020"  # Route Network
      - "data-entity:021"  # Shape
      - "data-entity:022"  # Frequency
      - "data-entity:023"  # Transfer
      - "data-entity:024"  # Pathway
      - "data-entity:025"  # Level
      - "data-entity:026"  # Location Group
      - "data-entity:027"  # Location Group Stop
      - "data-entity:028"  # Location
      - "data-entity:029"  # Booking Rule
      - "data-entity:030"  # Translation
      - "data-entity:031"  # Feed Info
      - "data-entity:032"  # Attribution

  - id: "component:003"
    name: "Infobus API (Public Query)"
    description: "HTTP read-only API that exposes routes, trips, stops, and schedules to the public."
    data_entities:
      - "data-entity:001"  # Agency
      - "data-entity:002"  # Stop
      - "data-entity:003"  # Route
      - "data-entity:004"  # Trip
      - "data-entity:005"  # Stop Time
      - "data-entity:006"  # Calendar
      - "data-entity:007"  # Calendar Date
      - "data-entity:021"  # Shape
      - "data-entity:022"  # Frequency
      - "data-entity:023"  # Transfer
      - "data-entity:024"  # Pathway
      - "data-entity:025"  # Level
      - "data-entity:030"  # Translation
      - "data-entity:031"  # Feed Info
      - "data-entity:032"  # Attribution

  - id: "component:004"
    name: "Infobus Screens (Display Server)"
    description: "Back-end service that feeds information displays for stations and users; consumes Infobus API."
    data_entities:
      - "data-entity:002"  # Stop
      - "data-entity:003"  # Route
      - "data-entity:004"  # Trip
      - "data-entity:005"  # Stop Time
      - "data-entity:021"  # Shape
      - "data-entity:022"  # Frequency
      - "data-entity:023"  # Transfer
      - "data-entity:031"  # Feed Info

  - id: "component:005"
    name: "Infobus Info Server (Aggregation/Cache)"
    description: "Internal aggregation and caching service for combined catalog and real-time data queries."
    data_entities:
      - "data-entity:001"  # Agency
      - "data-entity:002"  # Stop
      - "data-entity:003"  # Route
      - "data-entity:004"  # Trip
      - "data-entity:005"  # Stop Time
      - "data-entity:006"  # Calendar
      - "data-entity:007"  # Calendar Date
      - "data-entity:021"  # Shape
      - "data-entity:022"  # Frequency
      - "data-entity:023"  # Transfer
      - "data-entity:024"  # Pathway
      - "data-entity:025"  # Level
      - "data-entity:026"  # Location Group
      - "data-entity:027"  # Location Group Stop
      - "data-entity:028"  # Location
      - "data-entity:029"  # Booking Rule
      - "data-entity:030"  # Translation
      - "data-entity:031"  # Feed Info
      - "data-entity:032"  # Attribution

  - id: "component:006"
    name: "Infobus Data (Analytics/BI)"
    description: "Analytical platform that consolidates historical data for reporting and business intelligence models (BI/ETL)."
    data_entities:
      - "data-entity:001"  # Agency
      - "data-entity:002"  # Stop
      - "data-entity:003"  # Route
      - "data-entity:004"  # Trip
      - "data-entity:005"  # Stop Time
      - "data-entity:006"  # Calendar
      - "data-entity:007"  # Calendar Date
      - "data-entity:008"  # Fare Attribute
      - "data-entity:009"  # Fare Rule
      - "data-entity:010"  # Timeframe
      - "data-entity:011"  # Rider Category
      - "data-entity:012"  # Fare Medium
      - "data-entity:013"  # Fare Product
      - "data-entity:014"  # Fare Leg Rule
      - "data-entity:015"  # Fare Leg Join Rule
      - "data-entity:016"  # Fare Transfer Rule
      - "data-entity:017"  # Area
      - "data-entity:018"  # Stop Area
      - "data-entity:019"  # Network
      - "data-entity:020"  # Route Network
      - "data-entity:021"  # Shape
      - "data-entity:022"  # Frequency
      - "data-entity:023"  # Transfer
      - "data-entity:024"  # Pathway
      - "data-entity:025"  # Level
      - "data-entity:026"  # Location Group
      - "data-entity:027"  # Location Group Stop
      - "data-entity:028"  # Location
      - "data-entity:029"  # Booking Rule
      - "data-entity:030"  # Translation
      - "data-entity:031"  # Feed Info
      - "data-entity:032"  # Attribution

  # ------------------------------------------------------------
  # Operational data components
  # ------------------------------------------------------------
  - id: "component:007"
    name: "Vehicle Telemetry Service"
    description: "Service that collects, stores, and publishes real-time telemetry and positioning data from vehicles and on-board devices."
    data_entities:
      - "data-entity:033"  # Vehicle
      - "data-entity:034"  # On-board Device

  - id: "component:008"
    name: "Infrastructure Device Manager"
    description: "Platform that supervises and monitors fixed infrastructure devices such as cameras, sensors, or communication gateways."
    data_entities:
      - "data-entity:035"  # Infrastructure Device
      - "data-entity:036"  # Screen

  - id: "component:009"
    name: "Display Content Service"
    description: "Back-end responsible for generating and distributing dynamic content for passenger information screens."
    data_entities:
      - "data-entity:036"  # Screen
      - "data-entity:003"  # Route
      - "data-entity:004"  # Trip
      - "data-entity:005"  # Stop Time
      - "data-entity:031"  # Feed Info
      - "data-entity:032"  # Attribution

  - id: "component:010"
    name: "Driver Management System"
    description: "System that stores driver records, licensing, assignments, and attendance within the operational environment."
    data_entities:
      - "data-entity:037"  # Driver
      - "data-entity:033"  # Vehicle

  - id: "component:011"
    name: "Dispatch and Control Center"
    description: "Central platform that coordinates driver assignments, vehicle dispatch, incident monitoring, and schedule control."
    data_entities:
      - "data-entity:037"  # Driver
      - "data-entity:038"  # Dispatcher
      - "data-entity:033"  # Vehicle
      - "data-entity:004"  # Trip
      - "data-entity:005"  # Stop Time
      - "data-entity:006"  # Calendar
      - "data-entity:007"  # Calendar Date
      - "data-entity:017"  # Area
      - "data-entity:018"  # Stop Area

  - id: "component:012"
    name: "Operational Data Warehouse"
    description: "Analytical layer that integrates telemetry, driver performance, and infrastructure metrics for operational insights and dashboards."
    data_entities:
      - "data-entity:033"  # Vehicle
      - "data-entity:034"  # On-board Device
      - "data-entity:035"  # Infrastructure Device
      - "data-entity:036"  # Screen
      - "data-entity:037"  # Driver
      - "data-entity:038"  # Dispatcher

