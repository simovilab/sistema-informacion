# yaml-language-server: $schema=../schemas/entities.schema.json
# Metadata about the catalog

metadata:
  title: "Catálogo de Entidades de Datos"
  version: "1.0.0"
  date: "2025-09-18"
  description: "Entidades canónicas del Sistema de Información de Transporte Público (alineadas a GTFS y extensiones operativas)."
  author:
    - "Jostin Cubero Torres"
    - "Fabián Abarca Calderón"
  organization: "Laboratorio de Sistemas Inteligentes de Movilidad (SIMOVI)"
  contact: "simovi@ucr.ac.cr"
  license: "CC BY-NC 4.0"

# HACER PRIMERO EN INGLÉS COMO OFICIAL

data_entities:

# ----
# GTFS
# ----

# Usuario no será incluido porque estarán dentro de actores
# Todo GTFS estará aquí, más las entidades operativas

  - id: data-entity:001
    name: "Agency"
    description: "Operador de transporte (GTFS Agency)."
    attributes:
      - id: attribute:004
        name: "agency_id"
        type: "String"
        description: "Identificador GTFS de la agencia."
      - id: attribute:005
        name: "agency_name"
        type: "String"
        description: "Nombre oficial de la agencia."
      - id: attribute:006
        name: "timezone"
        type: "String"
        description: "Zona horaria (IANA)."

  - id: data-entity:003
    name: "Route"
    description: "Ruta GTFS que agrupa viajes."
    attributes:
      - id: attribute:007
        name: "route_id"
        type: "String"
        description: "Identificador GTFS de la ruta."
      - id: attribute:008
        name: "route_short_name"
        type: "String"
        description: "Nombre corto de la ruta (código/número)."
      - id: attribute:009
        name: "route_long_name"
        type: "String"
        description: "Nombre descriptivo de la ruta."
      - id: attribute:010
        name: "agency_id"
        type: "String"
        description: "Referencia a Agency."

  - id: data-entity:004
    name: "Trip"
    description: "Instancia planificada de recorrido (GTFS Trip)."
    attributes:
      - id: attribute:011
        name: "trip_id"
        type: "String"
        description: "Identificador GTFS del viaje."
      - id: attribute:012
        name: "route_id"
        type: "String"
        description: "Referencia a Route."
      - id: attribute:013
        name: "service_id"
        type: "String"
        description: "Referencia a ServiceCalendar."
      - id: attribute:014
        name: "direction_id"
        type: "Integer"
        description: "Sentido (0/1)."

  - id: data-entity:005
    name: "Stop"
    description: "Punto de parada (GTFS Stop)."
    attributes:
      - id: attribute:015
        name: "stop_id"
        type: "String"
        description: "Identificador de la parada."
      - id: attribute:016
        name: "stop_name"
        type: "String"
        description: "Nombre visible."
      - id: attribute:017
        name: "lat"
        type: "Float"
        description: "Latitud WGS84."
      - id: attribute:018
        name: "lon"
        type: "Float"
        description: "Longitud WGS84."

  - id: data-entity:006
    name: "ServiceCalendar"
    description: "Calendario de servicio (GTFS)."
    attributes:
      - id: attribute:019
        name: "service_id"
        type: "String"
        description: "Identificador del calendario."
      - id: attribute:020
        name: "weekday_pattern"
        type: "String"
        description: "Patrón de días (flags)."
      - id: attribute:021
        name: "start_date"
        type: "Date"
        description: "Fecha inicio (YYYY-MM-DD)."
      - id: attribute:022
        name: "end_date"
        type: "Date"
        description: "Fecha fin (YYYY-MM-DD)."

# --------------------
# Entidades operativas
# --------------------

  - id: data-entity:007
    name: "Vehicle"
    description: "Vehículo/Bus operativo (extensión)."
    attributes:
      - id: attribute:023
        name: "vehicle_id"
        type: "String"
        description: "Identificador único del vehículo."
      - id: attribute:024
        name: "plate"
        type: "String"
        description: "Placa oficial."
      - id: attribute:025
        name: "capacity"
        type: "Integer"
        description: "Capacidad nominal de pasajeros."
      - id: attribute:026
        name: "agency_id"
        type: "String"
        description: "Referencia a Agency."
  - id: data-entity:008
    name: "Driver"
    description: "Conductor operativo (extensión)."
    attributes:
      - id: attribute:027
        name: "driver_id"
        type: "String"
        description: "Identificador único del conductor."
      - id: attribute:028
        name: "name"
        type: "String"
        description: "Nombre completo del conductor."
      - id: attribute:029
        name: "license_number"
        type: "String"
        description: "Número de licencia de conducir."
      - id: attribute:030
        name: "contact_number"
        type: "String"
        description: "Número de contacto del conductor."
  - id: data-entity:008
    name: "Dispatcher"
    description: "Instancia operativa de un viaje (extensión)."
    attributes:
      - id: attribute:031
        name: "trip_instance_id"
        type: "String"
        description: "Identificador único de la instancia del viaje."
      - id: attribute:032
        name: "trip_id"
        type: "String"
        description: "Referencia a Trip."
      - id: attribute:033
        name: "vehicle_id"
        type: "String"
        description: "Referencia a Vehicle."
      - id: attribute:034
        name: "driver_id"
        type: "String"
        description: "Referencia a Driver."
      - id: attribute:035
        name: "departure_time"
        type: "DateTime"
        description: "Hora y fecha de salida programada."
      - id: attribute:036
        name: "arrival_time"
        type: "DateTime"
        description: "Hora y fecha de llegada programada."
  - id: data-entity:009
    name: "Run"
    description: "Instancia operativa de un viaje (extensión)."
    attributes:
      - id: attribute:031
        name: "trip_instance_id"
        type: "String"
        description: "Identificador único de la instancia del viaje."
      - id: attribute:032
        name: "trip_id"
        type: "String"
        description: "Referencia a Trip."
      - id: attribute:033
        name: "vehicle_id"
        type: "String"
        description: "Referencia a Vehicle."
      - id: attribute:034
        name: "driver_id"
        type: "String"
        description: "Referencia a Driver."
      - id: attribute:035
        name: "departure_time"
        type: "DateTime"
        description: "Hora y fecha de salida programada."
      - id: attribute:036
        name: "arrival_time"
        type: "DateTime"
        description: "Hora y fecha de llegada programada."
  - id: data-entity:010
    name: "Screens"
    description: "Pantallas informativas en paradas (extensión)."
    attributes:
      - id: attribute:037
        name: "screen_id"
        type: "String"
        description: "Identificador único de la pantalla."
      - id: attribute:038
        name: "stop_id"
        type: "String"
        description: "Referencia a Stop."
      - id: attribute:039
        name: "installation_date"
        type: "Date"
        description: "Fecha de instalación de la pantalla."
  - id: data-entity:011
    name: "On-Board Device"
    description: "Dispositivo a bordo (extensión)."
    attributes:
      - id: attribute:040
        name: "record_id"
        type: "String"
        description: "Identificador único del dispositivo a bordo."
      - id: attribute:041
        name: "vehicle_id"
        type: "String"
        description: "Referencia a Vehicle."
      - id: attribute:042
        name: "maintenance_date"
        type: "Date"
        description: "Fecha del mantenimiento."
      - id: attribute:043
        name: "description"
        type: "String"
        description: "Descripción del mantenimiento realizado."