{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Requirements Catalog Schema",
  "description": "JSON Schema for validating requirements catalog YAML files in the Public Transportation Information System architecture",
  "type": "object",
  "required": ["metadata", "requirements"],
  "properties": {
    "metadata": {
      "$ref": "./metadata.schema.json"
    },
    "requirements": {
      "type": "array",
      "description": "List of requirements for the public transportation information system",
      "items": {
        "type": "object",
        "required": [
          "id",
          "name",
          "description",
          "applications",
          "type",
          "priority",
          "rationale"
        ],
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^requirement:\\d{3}$",
            "description": "Unique identifier for the requirement following the pattern requirement:XXX"
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "description": "The name of the requirement"
          },
          "description": {
            "type": "string",
            "minLength": 1,
            "description": "Clear statement of what the system shall do or provide"
          },
          "applications": {
            "type": "array",
            "items": {
              "type": "string",
                "pattern": "^application:[A-Za-z0-9_\\-]+$",
              "description": "Identifier of the application(s) this requirement applies to, following the pattern application:XXX"
            },
            "minItems": 1,
            "description": "List of application IDs this requirement is associated with"
          },
          "type": {
            "type": "string",
            "enum": [
              "Functional",
              "Non-Functional",
              "Business",
              "Technical",
              "Performance",
              "Security",
              "Safety",
              "Usability",
              "Reliability",
              "Compliance",
              "Integration",
              "Operational"
            ],
            "description": "Type of requirement"
          },
          "priority": {
            "type": "string",
            "enum": ["Critical", "High", "Medium", "Low"],
            "description": "Priority level of the requirement"
          },
          "status": {
            "type": "string",
            "enum": [
              "Approved",
              "Pending",
              "Rejected",
              "In Review",
              "Implemented",
              "Testing",
              "Deferred",
              "Cancelled"
            ],
            "description": "Current status of the requirement"
          },
          "rationale": {
            "type": "string",
            "minLength": 1,
            "description": "Explanation of why this requirement is important and beneficial"
          },
          "stakeholders": {
            "type": "array",
            "items": {
              "type": "string",
                "pattern": "^stakeholder:[A-Za-z0-9_\\-]+$",
              "description": "Identifier of the application(s) this requirement applies to, following the pattern application:XXX"
            },
            "minItems": 1,
            "description": "List of stakeholder groups affected by or interested in this requirement"
          },
          "acceptance_criteria": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            },
            "minItems": 1,
            "description": "List of specific, measurable criteria that define when the requirement is satisfied"
          },
          "related_components": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            },
            "minItems": 1,
            "description": "List of system components that implement or are affected by this requirement"
          },
          "related_interfaces": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            },
            "minItems": 1,
            "description": "List of interfaces that support or enable this requirement"
          },
          "related_data_entities": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            },
            "minItems": 1,
            "description": "List of data entities involved in fulfilling this requirement"
          },
          "related_actors": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            },
            "minItems": 1,
            "description": "List of actors (users, systems) that interact with this requirement"
          }
        },
        "additionalProperties": false
      },
      "minItems": 1
    }
  },
  "additionalProperties": false
}
